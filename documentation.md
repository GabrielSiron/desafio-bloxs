# Documentação - Projeto

## API - Routes

#
    /signup

    - Método: POST;
    - Uso: cadastro de novos usuários;
    - require authentication: no;
    - required body:
    
        {
          "email": "teste@teste.com",
          "password": "senha",
          "name": "Teste",
          "cpf": "12345678910",
          "birth": "2001-06-19T00:00:00"
        }
    
    - Response (if there is no error):
        {
	      "amount": 0.0,
	      "email": "teste@teste.com"
        }

    OBS.: 
    - The signup endpoint doesn't log in the user. Use the signin endpoint to do this;
    - If some fields are not present in the body, the API will alert about it and will return error code 400 (BAD REQUEST);
    - email and cpf are primary key to the database. So, repeated cpf's or email's are not allowed. If some repeated email or cpf () provided, the API will alert about it and will return error code 400 (BAD REQUEST);
  
#

    /signin

    - Método: POST;
    - Uso: fazer login na aplicação;
    - Requer autenticação: Não;
    - Body requerido:

      {
        "email": "teste@teste.com",
        "password": "senha"
      }

#

    /transaction

    - Método: GET;
    - Uso: Listar transações do usuário com paginação;
    - Requer autenticação: Sim (adicionar "token" no header);
    - Body requerido: Não;
    - Parâmetros de Query: 
    
        {
            page: 1
        }

    - url de exemplo: http://api-bloxs:5000/transaction?page=1
    
    OBS.: número em "page" ilustrativo. Dado depende do frontend (representa o valor da paginação dos dados);

#

    /transaction

    - Método: POST;
    - Uso: criar uma transação em banco;
    - Requer autenticação: Sim (adicionar "token" no header);
    - Body requerido:

        {
          "value": 50.00,
          "transaction_date": "2023-03-06T00:00:00",
          "transfer_sender_id": 1,
          "transfer_receiver_id": 2
        }

    OBS.:

    - "value" deve ser sempre positivo (inclusive diferente de 0);
    - "transfer_sender_id" é o id do usuário que envia a transferência. Deve ser igual ao id do usuário logado ou Nulo (será nulo quando o sistema simular um depósito);
    - "transfer_sender_id" e "transfer_receiver_id" devem ser diferentes sempre;

#

    /account

    - Método: GET;
    - Uso: Coletar dados da conta do usuário logado;
    - Requer autenticação: Sim (adicionar "token" no header);
    - Body requerido: Não;

#

    /block

    - Método: PUT;
    - Uso: Bloquear a conta do usuário logado;
    - Requer autenticação: Sim (adicionar "token" no header);
    - Body requerido: Não;

## API - Authentication

The session management of this API generate and validate the authentication token sended by the client, with 
the library JWT. The token is generated by the following attributes:

- Email;
- Id;
- Secret Key;

Email and Id belongs to the current user, and the Secret Key is defined inside the API code. This process is positive because is possible to do it in two different directions: generate a token by email, id and secret_key; get email and id by token. In fact, a token is considered valid as long as possible do the second one.